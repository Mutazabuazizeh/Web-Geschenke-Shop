<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Weihnachtsgeschenke-Shop</title>

  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>

<div id="page-catalog">
  <h1>{{ title }}</h1>

<script>
if (!localStorage.getItem('user')) {
  window.location.href = 'login.html'
}
</script>
  <input type="text" placeholder="Suche..." v-model="search">

  <div class="product"
       v-for="product in filteredProducts"
       :key="product.id">

    <img :src="product.image" width="150">
    <h3>{{ product.title }}</h3>
    <p>{{ product.price.toFixed(2) }} €</p>

    <button @click="addToCart(product)">+</button>
    <span>{{ getQuantity(product.id) }}</span>
    <button @click="removeFromCart(product)"
            :disabled="getQuantity(product.id) === 0">−</button>
  </div>

  <hr>

  <p>Produkte: {{ cart.length }}</p>
  <p>Stück: {{ cartTotalItems }}</p>
  <p>Zwischensumme: {{ cartNet.toFixed(2) }} €</p>
  <p>MwSt (7%): {{ cartVat.toFixed(2) }} €</p>
  <strong>Gesamt: {{ cartGross.toFixed(2) }} €</strong>

  <p>
    <a href="cart.html">Zum Warenkorb</a>
  </p>

  <div id="message-bar">
    <div class="message" v-for="(msg, i) in messages" :key="i">
      {{ msg }}
    </div>
  </div>
</div>

<script src="js/app.js"></script>
</body>
</html>
